/**	@file
	@brief IOポートの制御
*/

#include "../define.h"

/*
	仮想ポートの割り当て
	VPORT0 <= PORTA
	VPORT1 <= PORTB
	VPORT2 <= PORTC
	VPORT3 <= PORTR
*/

namespace GPIO{
	
	// GPIOの初期化
	void Init(void){
		// 仮想ポートを割り当てる
		PORTCFG.VPCTRLA = PORTCFG_VP13MAP_PORTB_gc | PORTCFG_VP02MAP_PORTA_gc;
		PORTCFG.VPCTRLB = PORTCFG_VP13MAP_PORTR_gc | PORTCFG_VP02MAP_PORTC_gc;
		
		// ポートA
		PORTCFG.MPCMASK = 0b10011100;
		PORTA.PIN0CTRL = PORT_OPC_PULLUP_gc;
		PORTCFG.MPCMASK = 0b01111111;
		PORTA.PIN0CTRL = PORT_ISC_INPUT_DISABLE_gc;	// アナログ入力なのでデジタル入力を無効化
		//VPORT0.OUT = 0b00000000;
		//VPORT0.DIR = 0b00000000;
		
		// ポートB
		PORTCFG.MPCMASK = 0b1111;
		PORTB.PIN0CTRL = PORT_OPC_PULLDOWN_gc | PORT_ISC_INPUT_DISABLE_gc;
		//VPORT1.OUT = 0b0000;
		//VPORT1.DIR = 0b0000;
		
		// ポートC
		PORTCFG.MPCMASK = 0b10001000;
		PORTC.PIN0CTRL = PORT_OPC_PULLDOWN_gc;
		VPORT2.OUT = 0b01000000;
		VPORT2.DIR = 0b01110111;
		
		// ポートD
		PORTCFG.MPCMASK = 0b00110111;
		PORTD.PIN0CTRL = PORT_OPC_PULLUP_gc;
		PORTD.OUT = 0b00001000;
		PORTD.DIR = 0b00001000;
		
		// ポートE
		PORTCFG.MPCMASK = 0b0111;
		PORTE.PIN0CTRL = PORT_OPC_PULLUP_gc;
		PORTE.OUT = 0b1000;
		PORTE.DIR = 0b1000;
		
		// ポートR
		//VPORT3.OUT = 0b00;
		VPORT3.DIR = 0b11;
	}
}









