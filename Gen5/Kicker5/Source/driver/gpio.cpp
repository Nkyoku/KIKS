/**	@file
	@brief IOポートの制御
*/

#include "../define.h"

/*
	仮想ポートの割り当て
	VPORT0 <= PORTA
	VPORT1 <= PORTC
	VPORT2 <= PORTD
	VPORT3 <= PORTE
*/

namespace GPIO{
	
	// GPIOの初期化
	void Init(void){
		// 仮想ポートを割り当てる
		PORTCFG.VPCTRLA = PORTCFG_VP13MAP_PORTC_gc | PORTCFG_VP02MAP_PORTA_gc;
		PORTCFG.VPCTRLB = PORTCFG_VP13MAP_PORTE_gc | PORTCFG_VP02MAP_PORTD_gc;
		
		// ポートA
		PORTCFG.MPCMASK = 0b10100001;
		PORTA.PIN0CTRL = PORT_OPC_PULLDOWN_gc;
		PORTCFG.MPCMASK = 0b11111111;
		PORTA.PIN0CTRL = PORT_ISC_INPUT_DISABLE_gc;	// アナログ入力なのでデジタル入力を無効化
		//VPORT0.OUT = 0b00000000;
		//VPORT0.DIR = 0b00000000;
		
		// ポートB
		PORTCFG.MPCMASK = 0b1111;
		PORTB.PIN0CTRL = PORT_OPC_PULLDOWN_gc | PORT_ISC_INPUT_DISABLE_gc;
		//PORTB.OUT = 0b0000;
		//PORTB.DIR = 0b0000;
		
		// ポートC
		PORTCFG.MPCMASK = 0b11110000;
		PORTC.PIN0CTRL = PORT_OPC_PULLDOWN_gc;
		VPORT1.OUT = 0b00000000;
		VPORT1.DIR = 0b00001111;
		
		// ポートD
		PORTCFG.MPCMASK = 0b00110100;
		PORTD.PIN0CTRL = PORT_OPC_PULLUP_gc;
		VPORT2.OUT = 0b00001000;
		VPORT2.DIR = 0b00001011;
		
		// ポートE
		PORTCFG.MPCMASK = 0b0101;
		PORTE.PIN0CTRL = PORT_OPC_PULLUP_gc;
		VPORT3.OUT = 0b1000;
		VPORT3.DIR = 0b1010;
		
		// ポートR
		//PORTR.OUT = 0b00;
		PORTR.DIR = 0b11;
	}
}









